/*
 * Flexigrid for jQuery -  v1.1
 *
 * Copyright (c) 2008 Paulo P. Marinas (code.google.com/p/flexigrid/)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 */(function(a){a.addFlex=function(b,c){if(b.grid)return!1;c=a.extend({height:200,width:"auto",striped:!0,novstripe:!1,minwidth:30,minheight:80,resizable:!0,url:!1,method:"POST",dataType:"xml",errormsg:"Connection Error",usepager:!1,nowrap:!0,page:1,total:1,useRp:!0,rp:15,rpOptions:[10,15,20,30,50],title:!1,pagestat:"Displaying {from} to {to} of {total} items",pagetext:"Page",outof:"of",findtext:"Find",procmsg:"Processing, please wait ...",query:"",qtype:"",nomsg:"No items",minColToggle:1,showToggleBtn:!0,hideOnSubmit:!0,autoload:!0,blockOpacity:.5,preProcess:!1,onDragCol:!1,onToggleCol:!1,onChangeSort:!1,onSuccess:!1,onError:!1,onSubmit:!1},c),a(b).show().attr({cellPadding:0,cellSpacing:0,border:0}).removeAttr("width");var d={hset:{},rePosDrag:function(){var b=0-this.hDiv.scrollLeft;this.hDiv.scrollLeft>0&&(b-=Math.floor(c.cgwidth/2)),a(d.cDrag).css({top:d.hDiv.offsetTop+1});var e=this.cdpad;a("div",d.cDrag).hide(),a("thead tr:first th:visible",this.hDiv).each(function(){var f=a("thead tr:first th:visible",d.hDiv).index(this),g=parseInt(a("div",this).width());b==0&&(b-=Math.floor(c.cgwidth/2)),g=g+b+e,isNaN(g)&&(g=0),a("div:eq("+f+")",d.cDrag).css({left:g+"px"}).show(),b=g})},fixHeight:function(b){b=!1,b||(b=a(d.bDiv).height());var e=a(this.hDiv).height();a("div",this.cDrag).each(function(){a(this).height(b+e)});var f=parseInt(a(d.nDiv).height());f>b?a(d.nDiv).height(b).width(200):a(d.nDiv).height("auto").width("auto"),a(d.block).css({height:b,marginBottom:b*-1});var g=d.bDiv.offsetTop+b;c.height!="auto"&&c.resizable&&(g=d.vDiv.offsetTop),a(d.rDiv).css({height:g})},dragStart:function(b,e,f){if(b=="colresize"){a(d.nDiv).hide(),a(d.nBtn).hide();var g=a("div",this.cDrag).index(f),h=a("th:visible div:eq("+g+")",this.hDiv).width();a(f).addClass("dragging").siblings().hide(),a(f).prev().addClass("dragging").show(),this.colresize={startX:e.pageX,ol:parseInt(f.style.left),ow:h,n:g},a("body").css("cursor","col-resize")}else if(b=="vresize"){var i=!1;a("body").css("cursor","row-resize"),f&&(i=!0,a("body").css("cursor","col-resize")),this.vresize={h:c.height,sy:e.pageY,w:c.width,sx:e.pageX,hgo:i}}else b=="colMove"&&(a(d.nDiv).hide(),a(d.nBtn).hide(),this.hset=a(this.hDiv).offset(),this.hset.right=this.hset.left+a("table",this.hDiv).width(),this.hset.bottom=this.hset.top+a("table",this.hDiv).height(),this.dcol=f,this.dcoln=a("th",this.hDiv).index(f),this.colCopy=document.createElement("div"),this.colCopy.className="colCopy",this.colCopy.innerHTML=f.innerHTML,a.browser.msie&&(this.colCopy.className="colCopy ie"),a(this.colCopy).css({position:"absolute","float":"left",display:"none",textAlign:f.align}),a("body").append(this.colCopy),a(this.cDrag).hide());a("body").noSelect()},dragMove:function(b){if(this.colresize){var d=this.colresize.n,e=b.pageX-this.colresize.startX,f=this.colresize.ol+e,g=this.colresize.ow+e;g>c.minwidth&&(a("div:eq("+d+")",this.cDrag).css("left",f),this.colresize.nw=g)}else if(this.vresize){var h=this.vresize,i=b.pageY,e=i-h.sy;c.defwidth||(c.defwidth=c.width);if(c.width!="auto"&&!c.nohresize&&h.hgo){var j=b.pageX,k=j-h.sx,l=h.w+k;l>c.defwidth&&(this.gDiv.style.width=l+"px",c.width=l)}var m=h.h+e;(m>c.minheight||c.height<c.minheight)&&!h.hgo&&(this.bDiv.style.height=m+"px",c.height=m,this.fixHeight(m)),h=null}else this.colCopy&&(a(this.dcol).addClass("thMove").removeClass("thOver"),b.pageX>this.hset.right||b.pageX<this.hset.left||b.pageY>this.hset.bottom||b.pageY<this.hset.top?a("body").css("cursor","move"):a("body").css("cursor","pointer"),a(this.colCopy).css({top:b.pageY+10,left:b.pageX+20,display:"block"}))},dragEnd:function(){if(this.colresize){var b=this.colresize.n,d=this.colresize.nw;a("th:visible div:eq("+b+")",this.hDiv).css("width",d),a("tr",this.bDiv).each(function(){a("td:visible div:eq("+b+")",this).css("width",d)}),this.hDiv.scrollLeft=this.bDiv.scrollLeft,a("div:eq("+b+")",this.cDrag).siblings().show(),a(".dragging",this.cDrag).removeClass("dragging"),this.rePosDrag(),this.fixHeight(),this.colresize=!1}else this.vresize?this.vresize=!1:this.colCopy&&(a(this.colCopy).remove(),this.dcolt!=null&&(this.dcoln>this.dcolt?a("th:eq("+this.dcolt+")",this.hDiv).before(this.dcol):a("th:eq("+this.dcolt+")",this.hDiv).after(this.dcol),this.switchCol(this.dcoln,this.dcolt),a(this.cdropleft).remove(),a(this.cdropright).remove(),this.rePosDrag(),c.onDragCol&&c.onDragCol(this.dcoln,this.dcolt)),this.dcol=null,this.hset=null,this.dcoln=null,this.dcolt=null,this.colCopy=null,a(".thMove",this.hDiv).removeClass("thMove"),a(this.cDrag).show());a("body").css("cursor","default"),a("body").noSelect(!1)},toggleCol:function(e,f){var g=a("th[axis='col"+e+"']",this.hDiv)[0],h=a("thead th",d.hDiv).index(g),i=a("input[value="+e+"]",d.nDiv)[0];return f==null&&(f=g.hidden),a("input:checked",d.nDiv).length<c.minColToggle&&!f?!1:(f?(g.hidden=!1,a(g).show(),i.checked=!0):(g.hidden=!0,a(g).hide(),i.checked=!1),a("tbody tr",b).each(function(){f?a("td:eq("+h+")",this).show():a("td:eq("+h+")",this).hide()}),this.rePosDrag(),c.onToggleCol&&c.onToggleCol(e,f),f)},switchCol:function(c,d){a("tbody tr",b).each(function(){c>d?a("td:eq("+d+")",this).before(a("td:eq("+c+")",this)):a("td:eq("+d+")",this).after(a("td:eq("+c+")",this))}),c>d?a("tr:eq("+d+")",this.nDiv).before(a("tr:eq("+c+")",this.nDiv)):a("tr:eq("+d+")",this.nDiv).after(a("tr:eq("+c+")",this.nDiv)),a.browser.msie&&a.browser.version<7&&(a("tr:eq("+d+") input",this.nDiv)[0].checked=!0),this.hDiv.scrollLeft=this.bDiv.scrollLeft},scroll:function(){this.hDiv.scrollLeft=this.bDiv.scrollLeft,this.rePosDrag()},addData:function(e){c.dataType=="json"&&(e=a.extend({rows:[],page:0,total:0},e)),c.preProcess&&(e=c.preProcess(e)),a(".pReload",this.pDiv).removeClass("loading"),this.loading=!1;if(!e)return a(".pPageStat",this.pDiv).html(c.errormsg),!1;c.dataType=="xml"?c.total=+a("rows total",e).text():c.total=e.total;if(c.total==0)return a("tr, a, td, div",b).unbind(),a(b).empty(),c.pages=1,c.page=1,this.buildpager(),a(".pPageStat",this.pDiv).html(c.nomsg),!1;c.pages=Math.ceil(c.total/c.rp),c.dataType=="xml"?c.page=+a("rows page",e).text():c.page=e.page,this.buildpager();var f=document.createElement("tbody");if(c.dataType=="json")a.each(e.rows,function(b,e){var g=document.createElement("tr");b%2&&c.striped&&(g.className="erow"),e.id&&(g.id="row"+e.id),a("thead tr:first th",d.hDiv).each(function(){var b=document.createElement("td"),d=a(this).attr("axis").substr(3);b.align=this.align,typeof e.cell[d]!="undefined"?b.innerHTML=e.cell[d]!=null?e.cell[d]:"":b.innerHTML=e.cell[c.colModel[d].name],a(b).attr("abbr",a(this).attr("abbr")),a(g).append(b),b=null});if(a("thead",this.gDiv).length<1)for(idx=0;idx<cell.length;idx++){var h=document.createElement("td");typeof e.cell[idx]!="undefined"?h.innerHTML=e.cell[idx]!=null?e.cell[idx]:"":h.innerHTML=e.cell[c.colModel[idx].name],a(g).append(h),h=null}a(f).append(g),g=null});else if(c.dataType=="xml"){var g=1;a("rows row",e).each(function(){g++;var b=document.createElement("tr");g%2&&c.striped&&(b.className="erow");var e=a(this).attr("id");e&&(b.id="row"+e),e=null;var h=this;a("thead tr:first th",d.hDiv).each(function(){var c=document.createElement("td"),d=a(this).attr("axis").substr(3);c.align=this.align,c.innerHTML=a("cell:eq("+d+")",h).text(),a(c).attr("abbr",a(this).attr("abbr")),a(b).append(c),c=null}),a("thead",this.gDiv).length<1&&a("cell",this).each(function(){var c=document.createElement("td");c.innerHTML=a(this).text(),a(b).append(c),c=null}),a(f).append(b),b=null,h=null})}a("tr",b).unbind(),a(b).empty(),a(b).append(f),this.addCellProp(),this.addRowProp(),this.rePosDrag(),f=null,e=null,g=null,c.onSuccess&&c.onSuccess(this),c.hideOnSubmit&&a(d.block).remove(),this.hDiv.scrollLeft=this.bDiv.scrollLeft,a.browser.opera&&a(b).css("visibility","visible")},changeSort:function(b){if(this.loading)return!0;a(d.nDiv).hide(),a(d.nBtn).hide(),c.sortname==a(b).attr("abbr")&&(c.sortorder=="asc"?c.sortorder="desc":c.sortorder="asc"),a(b).addClass("sorted").siblings().removeClass("sorted"),a(".sdesc",this.hDiv).removeClass("sdesc"),a(".sasc",this.hDiv).removeClass("sasc"),a("div",b).addClass("s"+c.sortorder),c.sortname=a(b).attr("abbr"),c.onChangeSort?c.onChangeSort(c.sortname,c.sortorder):this.populate()},buildpager:function(){a(".pcontrol input",this.pDiv).val(c.page),a(".pcontrol span",this.pDiv).html(c.pages);var b=(c.page-1)*c.rp+1,d=b+c.rp-1;c.total<d&&(d=c.total);var e=c.pagestat;e=e.replace(/{from}/,b),e=e.replace(/{to}/,d),e=e.replace(/{total}/,c.total),a(".pPageStat",this.pDiv).html(e)},populate:function(){if(this.loading)return!0;if(c.onSubmit){var e=c.onSubmit();if(!e)return!1}this.loading=!0;if(!c.url)return!1;a(".pPageStat",this.pDiv).html(c.procmsg),a(".pReload",this.pDiv).addClass("loading"),a(d.block).css({top:d.bDiv.offsetTop}),c.hideOnSubmit&&a(this.gDiv).prepend(d.block),a.browser.opera&&a(b).css("visibility","hidden"),c.newp||(c.newp=1),c.page>c.pages&&(c.page=c.pages);var f=[{name:"page",value:c.newp},{name:"rp",value:c.rp},{name:"sortname",value:c.sortname},{name:"sortorder",value:c.sortorder},{name:"query",value:c.query},{name:"qtype",value:c.qtype}];if(c.params)for(var g=0;g<c.params.length;g++)f[f.length]=c.params[g];a.ajax({type:c.method,url:c.url,data:f,dataType:c.dataType,success:function(a){d.addData(a)},error:function(a,b,d){try{c.onError&&c.onError(a,b,d)}catch(e){}}})},doSearch:function(){c.query=a("input[name=q]",d.sDiv).val(),c.qtype=a("select[name=qtype]",d.sDiv).val(),c.newp=1,this.populate()},changePage:function(b){if(this.loading)return!0;switch(b){case"first":c.newp=1;break;case"prev":c.page>1&&(c.newp=parseInt(c.page)-1);break;case"next":c.page<c.pages&&(c.newp=parseInt(c.page)+1);break;case"last":c.newp=c.pages;break;case"input":var d=parseInt(a(".pcontrol input",this.pDiv).val());isNaN(d)&&(d=1),d<1?d=1:d>c.pages&&(d=c.pages),a(".pcontrol input",this.pDiv).val(d),c.newp=d}if(c.newp==c.page)return!1;c.onChangePage?c.onChangePage(c.newp):this.populate()},addCellProp:function(){a("tbody tr td",d.bDiv).each(function(){var b=document.createElement("div"),e=a("td",a(this).parent()).index(this),f=a("th:eq("+e+")",d.hDiv).get(0);f!=null&&(c.sortname==a(f).attr("abbr")&&c.sortname&&(this.className="sorted"),a(b).css({textAlign:f.align,width:a("div:first",f)[0].style.width}),f.hidden&&a(this).css("display","none")),c.nowrap==0&&a(b).css("white-space","normal"),this.innerHTML==""&&(this.innerHTML="&nbsp;"),b.innerHTML=this.innerHTML;var g=a(this).parent()[0],h=!1;g.id&&(h=g.id.substr(3)),f!=null&&f.process&&f.process(b,h),a(this).empty().append(b).removeAttr("width")})},getCellDim:function(b){var c=parseInt(a(b).height()),d=parseInt(a(b).parent().height()),e=parseInt(b.style.width),f=parseInt(a(b).parent().width()),g=b.offsetParent.offsetTop,h=b.offsetParent.offsetLeft,i=parseInt(a(b).css("paddingLeft")),j=parseInt(a(b).css("paddingTop"));return{ht:c,wt:e,top:g,left:h,pdl:i,pdt:j,pht:d,pwt:f}},addRowProp:function(){a("tbody tr",d.bDiv).each(function(){a(this).click(function(b){var d=b.target||b.srcElement;if(d.href||d.type)return!0;a(this).toggleClass("trSelected"),c.singleSelect&&a(this).siblings().removeClass("trSelected")}).mousedown(function(b){b.shiftKey&&(a(this).toggleClass("trSelected"),d.multisel=!0,this.focus(),a(d.gDiv).noSelect())}).mouseup(function(){d.multisel&&(d.multisel=!1,a(d.gDiv).noSelect(!1))}).hover(function(b){d.multisel&&a(this).toggleClass("trSelected")},function(){}),a.browser.msie&&a.browser.version<7&&a(this).hover(function(){a(this).addClass("trOver")},function(){a(this).removeClass("trOver")})})},pager:0};if(c.colModel){l=document.createElement("thead");var e=document.createElement("tr");for(var f=0;f<c.colModel.length;f++){var g=c.colModel[f],h=document.createElement("th");h.innerHTML=g.display,g.name&&g.sortable&&a(h).attr("abbr",g.name),a(h).attr("axis","col"+f),g.align&&(h.align=g.align),g.width&&a(h).attr("width",g.width),a(g).attr("hide")&&(h.hidden=!0),g.process&&(h.process=g.process),a(e).append(h)}a(l).append(e),a(b).prepend(l)}d.gDiv=document.createElement("div"),d.mDiv=document.createElement("div"),d.hDiv=document.createElement("div"),d.bDiv=document.createElement("div"),d.vDiv=document.createElement("div"),d.rDiv=document.createElement("div"),d.cDrag=document.createElement("div"),d.block=document.createElement("div"),d.nDiv=document.createElement("div"),d.nBtn=document.createElement("div"),d.iDiv=document.createElement("div"),d.tDiv=document.createElement("div"),d.sDiv=document.createElement("div"),d.pDiv=document.createElement("div"),c.usepager||(d.pDiv.style.display="none"),d.hTable=document.createElement("table"),d.gDiv.className="flexigrid",c.width!="auto"&&(d.gDiv.style.width=c.width+"px"),a.browser.msie&&a(d.gDiv).addClass("ie"),c.novstripe&&a(d.gDiv).addClass("novstripe"),a(b).before(d.gDiv),a(d.gDiv).append(b);if(c.buttons){d.tDiv.className="tDiv";var i=document.createElement("div");i.className="tDiv2";for(var f=0;f<c.buttons.length;f++){var j=c.buttons[f];if(!j.separator){var k=document.createElement("div");k.className="fbutton",k.innerHTML="<div><span>"+j.name+"</span></div>",j.bclass&&a("span",k).addClass(j.bclass).css({paddingLeft:20}),k.onpress=j.onpress,k.name=j.name,j.onpress&&a(k).click(function(){this.onpress(this.name,d.gDiv)}),a(i).append(k),a.browser.msie&&a.browser.version<7&&a(k).hover(function(){a(this).addClass("fbOver")},function(){a(this).removeClass("fbOver")})}else a(i).append("<div class='btnseparator'></div>")}a(d.tDiv).append(i),a(d.tDiv).append("<div style='clear:both'></div>"),a(d.gDiv).prepend(d.tDiv)}d.hDiv.className="hDiv",a(b).before(d.hDiv),d.hTable.cellPadding=0,d.hTable.cellSpacing=0,a(d.hDiv).append('<div class="hDivBox"></div>'),a("div",d.hDiv).append(d.hTable);var l=a("thead:first",b).get(0);l&&a(d.hTable).append(l),l=null;if(!c.colmodel)var m=0;a("thead tr:first th",d.hDiv).each(function(){var b=document.createElement("div");a(this).attr("abbr")&&(a(this).click(function(b){if(!a(this).hasClass("thOver"))return!1;var c=b.target||b.srcElement;if(c.href||c.type)return!0;d.changeSort(this)}),a(this).attr("abbr")==c.sortname&&(this.className="sorted",b.className="s"+c.sortorder)),this.hidden&&a(this).hide(),c.colmodel||a(this).attr("axis","col"+m++),a(b).css({textAlign:this.align,width:this.width+"px"}),b.innerHTML=this.innerHTML,a(this).empty().append(b).removeAttr("width").mousedown(function(a){d.dragStart("colMove",a,this)}).hover(function(){!d.colresize&&!a(this).hasClass("thMove")&&!d.colCopy&&a(this).addClass("thOver");if(a(this).attr("abbr")!=c.sortname&&!d.colCopy&&!d.colresize&&a(this).attr("abbr"))a("div",this).addClass("s"+c.sortorder);else if(a(this).attr("abbr")==c.sortname&&!d.colCopy&&!d.colresize&&a(this).attr("abbr")){var b=c.sortorder=="asc"?"desc":"asc";a("div",this).removeClass("s"+c.sortorder).addClass("s"+b)}if(d.colCopy){var e=a("th",d.hDiv).index(this);if(e==d.dcoln)return!1;e<d.dcoln?a(this).append(d.cdropleft):a(this).append(d.cdropright),d.dcolt=e}else if(!d.colresize){var f=a("th:visible",d.hDiv).index(this),g=parseInt(a("div:eq("+f+")",d.cDrag).css("left")),h=jQuery(d.nBtn).outerWidth(),i=g-h+Math.floor(c.cgwidth/2);a(d.nDiv).hide(),a(d.nBtn).hide(),a(d.nBtn).css({left:i,top:d.hDiv.offsetTop}).show();var j=parseInt(a(d.nDiv).width());a(d.nDiv).css({top:d.bDiv.offsetTop}),i+j>a(d.gDiv).width()?a(d.nDiv).css("left",g-j+1):a(d.nDiv).css("left",i),a(this).hasClass("sorted")?a(d.nBtn).addClass("srtd"):a(d.nBtn).removeClass("srtd")}},function(){a(this).removeClass("thOver");if(a(this).attr("abbr")!=c.sortname)a("div",this).removeClass("s"+c.sortorder);else if(a(this).attr("abbr")==c.sortname){var b=c.sortorder=="asc"?"desc":"asc";a("div",this).addClass("s"+c.sortorder).removeClass("s"+b)}d.colCopy&&(a(d.cdropleft).remove(),a(d.cdropright).remove(),d.dcolt=null)})}),d.bDiv.className="bDiv",a(b).before(d.bDiv),a(d.bDiv).css({height:c.height=="auto"?"auto":c.height+"px"}).scroll(function(a){d.scroll()}).append(b),c.height=="auto"&&a("table",d.bDiv).addClass("autoht"),d.addCellProp(),d.addRowProp();var n=a("thead tr:first th:first",d.hDiv).get(0);if(n!=null){d.cDrag.className="cDrag",d.cdpad=0,d.cdpad+=isNaN(parseInt(a("div",n).css("borderLeftWidth")))?0:parseInt(a("div",n).css("borderLeftWidth")),d.cdpad+=isNaN(parseInt(a("div",n).css("borderRightWidth")))?0:parseInt(a("div",n).css("borderRightWidth")),d.cdpad+=isNaN(parseInt(a("div",n).css("paddingLeft")))?0:parseInt(a("div",n).css("paddingLeft")),d.cdpad+=isNaN(parseInt(a("div",n).css("paddingRight")))?0:parseInt(a("div",n).css("paddingRight")),d.cdpad+=isNaN(parseInt(a(n).css("borderLeftWidth")))?0:parseInt(a(n).css("borderLeftWidth")),d.cdpad+=isNaN(parseInt(a(n).css("borderRightWidth")))?0:parseInt(a(n).css("borderRightWidth")),d.cdpad+=isNaN(parseInt(a(n).css("paddingLeft")))?0:parseInt(a(n).css("paddingLeft")),d.cdpad+=isNaN(parseInt(a(n).css("paddingRight")))?0:parseInt(a(n).css("paddingRight")),a(d.bDiv).before(d.cDrag);var o=a(d.bDiv).height(),p=a(d.hDiv).height();a(d.cDrag).css({top:-p+"px"}),a("thead tr:first th",d.hDiv).each(function(){var b=document.createElement("div");a(d.cDrag).append(b),c.cgwidth||(c.cgwidth=a(b).width()),a(b).css({height:o+p}).mousedown(function(a){d.dragStart("colresize",a,this)}),a.browser.msie&&a.browser.version<7&&(d.fixHeight(a(d.gDiv).height()),a(b).hover(function(){d.fixHeight(),a(this).addClass("dragging")},function(){d.colresize||a(this).removeClass("dragging")}))})}c.striped&&a("tbody tr:odd",d.bDiv).addClass("erow"),c.resizable&&c.height!="auto"&&(d.vDiv.className="vGrip",a(d.vDiv).mousedown(function(a){d.dragStart("vresize",a)}).html("<span></span>"),a(d.bDiv).after(d.vDiv)),c.resizable&&c.width!="auto"&&!c.nohresize&&(d.rDiv.className="hGrip",a(d.rDiv).mousedown(function(a){d.dragStart("vresize",a,!0)}).html("<span></span>").css("height",a(d.gDiv).height()),a.browser.msie&&a.browser.version<7&&a(d.rDiv).hover(function(){a(this).addClass("hgOver")},function(){a(this).removeClass("hgOver")}),a(d.gDiv).append(d.rDiv));if(c.usepager){d.pDiv.className="pDiv",d.pDiv.innerHTML='<div class="pDiv2"></div>',a(d.bDiv).after(d.pDiv);var q=' <div class="pGroup"> <div class="pFirst pButton"><span></span></div><div class="pPrev pButton"><span></span></div> </div> <div class="btnseparator"></div> <div class="pGroup"><span class="pcontrol">'+c.pagetext+' <input type="text" size="4" value="1" /> '+c.outof+' <span> 1 </span></span></div> <div class="btnseparator"></div> <div class="pGroup"> <div class="pNext pButton"><span></span></div><div class="pLast pButton"><span></span></div> </div> <div class="btnseparator"></div> <div class="pGroup"> <div class="pReload pButton"><span></span></div> </div> <div class="btnseparator"></div> <div class="pGroup"><span class="pPageStat"></span></div>';a("div",d.pDiv).html(q),a(".pReload",d.pDiv).click(function(){d.populate()}),a(".pFirst",d.pDiv).click(function(){d.changePage("first")}),a(".pPrev",d.pDiv).click(function(){d.changePage("prev")}),a(".pNext",d.pDiv).click(function(){d.changePage("next")}),a(".pLast",d.pDiv).click(function(){d.changePage("last")}),a(".pcontrol input",d.pDiv).keydown(function(a){a.keyCode==13&&d.changePage("input")}),a.browser.msie&&a.browser.version<7&&a(".pButton",d.pDiv).hover(function(){a(this).addClass("pBtnOver")},function(){a(this).removeClass("pBtnOver")});if(c.useRp){var r="",s="";for(var t=0;t<c.rpOptions.length;t++)c.rp==c.rpOptions[t]?s='selected="selected"':s="",r+="<option value='"+c.rpOptions[t]+"' "+s+" >"+c.rpOptions[t]+"&nbsp;&nbsp;</option>";a(".pDiv2",d.pDiv).prepend("<div class='pGroup'><select name='rp'>"+r+"</select></div> <div class='btnseparator'></div>"),a("select",d.pDiv).change(function(){c.onRpChange?c.onRpChange(+this.value):(c.newp=1,c.rp=+this.value,d.populate())})}if(c.searchitems){a(".pDiv2",d.pDiv).prepend("<div class='pGroup'> <div class='pSearch pButton'><span></span></div> </div>  <div class='btnseparator'></div>"),a(".pSearch",d.pDiv).click(function(){a(d.sDiv).slideToggle("fast",function(){a(".sDiv:visible input:first",d.gDiv).trigger("focus")})}),d.sDiv.className="sDiv";var u=c.searchitems,v="",s="";for(var w=0;w<u.length;w++)c.qtype==""&&u[w].isdefault==1?(c.qtype=u[w].name,s='selected="selected"'):s="",v+="<option value='"+u[w].name+"' "+s+" >"+u[w].display+"&nbsp;&nbsp;</option>";c.qtype==""&&(c.qtype=u[0].name),a(d.sDiv).append("<div class='sDiv2'>"+c.findtext+" <input type='text' value='"+c.query+"' size='30' name='q' class='qsbox' /> "+" <select name='qtype'>"+v+"</select></div>"),a("input[name=q]",d.sDiv).keydown(function(a){a.keyCode==13&&d.doSearch()}),a("select[name=qtype]",d.sDiv).keydown(function(a){a.keyCode==13&&d.doSearch()}),a("input[value=Clear]",d.sDiv).click(function(){a("input[name=q]",d.sDiv).val(""),c.query="",d.doSearch()}),a(d.bDiv).after(d.sDiv)}}a(d.pDiv,d.sDiv).append("<div style='clear:both'></div>"),c.title&&(d.mDiv.className="mDiv",d.mDiv.innerHTML='<div class="ftitle">'+c.title+"</div>",a(d.gDiv).prepend(d.mDiv),c.showTableToggleBtn&&(a(d.mDiv).append('<div class="ptogtitle" title="Minimize/Maximize Table"><span></span></div>'),a("div.ptogtitle",d.mDiv).click(function(){a(d.gDiv).toggleClass("hideBody"),a(this).toggleClass("vsble")}))),d.cdropleft=document.createElement("span"),d.cdropleft.className="cdropleft",d.cdropright=document.createElement("span"),d.cdropright.className="cdropright",d.block.className="gBlock";var x=a(d.bDiv).height(),y=d.bDiv.offsetTop;a(d.block).css({width:d.bDiv.style.width,height:x,background:"white",position:"relative",marginBottom:x*-1,zIndex:1,top:y,left:"0px"}),a(d.block).fadeTo(0,c.blockOpacity);if(a("th",d.hDiv).length){d.nDiv.className="nDiv",d.nDiv.innerHTML="<table cellpadding='0' cellspacing='0'><tbody></tbody></table>",a(d.nDiv).css({marginBottom:x*-1,display:"none",top:y}).noSelect();var z=0;a("th div",d.hDiv).each(function(){var b=a("th[axis='col"+z+"']",d.hDiv)[0],c='checked="checked"';b.style.display=="none"&&(c=""),a("tbody",d.nDiv).append('<tr><td class="ndcol1"><input type="checkbox" '+c+' class="togCol" value="'+z+'" /></td><td class="ndcol2">'+this.innerHTML+"</td></tr>"),z++}),a.browser.msie&&a.browser.version<7&&a("tr",d.nDiv).hover(function(){a(this).addClass("ndcolover")},function(){a(this).removeClass("ndcolover")}),a("td.ndcol2",d.nDiv).click(function(){return a("input:checked",d.nDiv).length<=c.minColToggle&&a(this).prev().find("input")[0].checked?!1:d.toggleCol(a(this).prev().find("input").val())}),a("input.togCol",d.nDiv).click(function(){if(a("input:checked",d.nDiv).length<c.minColToggle&&this.checked==0)return!1;a(this).parent().next().trigger("click")}),a(d.gDiv).prepend(d.nDiv),a(d.nBtn).addClass("nBtn").html("<div></div>").attr("title","Hide/Show Columns").click(function(){return a(d.nDiv).toggle(),!0}),c.showToggleBtn&&a(d.gDiv).prepend(d.nBtn)}return a(d.iDiv).addClass("iDiv").css({display:"none"}),a(d.bDiv).append(d.iDiv),a(d.bDiv).hover(function(){a(d.nDiv).hide(),a(d.nBtn).hide()},function(){d.multisel&&(d.multisel=!1)}),a(d.gDiv).hover(function(){},function(){a(d.nDiv).hide(),a(d.nBtn).hide()}),a(document).mousemove(function(a){d.dragMove(a)}).mouseup(function(a){d.dragEnd()}).hover(function(){},function(){d.dragEnd()}),a.browser.msie&&a.browser.version<7&&(a(".hDiv,.bDiv,.mDiv,.pDiv,.vGrip,.tDiv, .sDiv",d.gDiv).css({width:"100%"}),a(d.gDiv).addClass("ie6"),c.width!="auto"&&a(d.gDiv).addClass("ie6fullwidthbug")),d.rePosDrag(),d.fixHeight(),b.p=c,b.grid=d,c.url&&c.autoload&&d.populate(),b};var b=!1;a(document).ready(function(){b=!0}),a.fn.flexigrid=function(c){return this.each(function(){if(!b){a(this).hide();var d=this;a(document).ready(function(){a.addFlex(d,c)})}else a.addFlex(this,c)})},a.fn.flexReload=function(a){return this.each(function(){this.grid&&this.p.url&&this.grid.populate()})},a.fn.flexOptions=function(b){return this.each(function(){this.grid&&a.extend(this.p,b)})},a.fn.flexToggleCol=function(a,b){return this.each(function(){this.grid&&this.grid.toggleCol(a,b)})},a.fn.flexAddData=function(a){return this.each(function(){this.grid&&this.grid.addData(a)})},a.fn.noSelect=function(b){var c=b==null?!0:b;return c?this.each(function(){a.browser.msie||a.browser.safari?a(this).bind("selectstart",function(){return!1}):a.browser.mozilla?(a(this).css("MozUserSelect","none"),a("body").trigger("focus")):a.browser.opera?a(this).bind("mousedown",function(){return!1}):a(this).attr("unselectable","on")}):this.each(function(){a.browser.msie||a.browser.safari?a(this).unbind("selectstart"):a.browser.mozilla?a(this).css("MozUserSelect","inherit"):a.browser.opera?a(this).unbind("mousedown"):a(this).removeAttr("unselectable","on")})}})(jQuery);